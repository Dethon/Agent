@inherits LayoutComponentBase
@implements IDisposable
@inject ChatHubService HubService

<div class="main-layout">
    <header class="header">
        <div class="header-title">
            <img src="cat-logo.svg" alt="Agent" class="header-logo"/>
        </div>
        <div class="connection-status">
            <span class="status-dot @(HubService.IsConnected ? "connected" : "")"></span>
            @(HubService.IsConnected ? "Connected" : "Disconnected")
        </div>
    </header>

    <main class="content">
        @Body
    </main>
</div>

@code {

    protected override void OnInitialized()
    {
        HubService.OnStateChanged += StateHasChanged;
    }

    public void Dispose()
    {
        HubService.OnStateChanged -= StateHasChanged;
    }

}
